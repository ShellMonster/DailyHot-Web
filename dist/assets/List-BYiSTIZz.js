import{ae as e,r as a,ag as s,w as l,o as t,e as n,ai as r,ab as o,ak as i,af as u,ad as c,ac as d,F as p,au as m,c as h,aj as f,ah as g,z as v,am as y,J as w}from"./vue-D_MwEF4M.js";import{I as k,_ as C,m as _,f as b}from"./index-D9LGmCWF.js";import{f as T}from"./hotListCache-DqiYTx3r.js";import{k as x,o as L,y as M,s as j,A as H,C as q,j as A,m as R,D as z}from"./naive-YRcojMnY.js";import"./pinia-fyyCVe93.js";import"./vuedraggable-By4FwDkK.js";const $=k("fire",!0,(function(a){return e("svg",{width:a.size,height:a.size,viewBox:"0 0 48 48",fill:"none"},[e("path",{d:"M24 44C32.2347 44 38.9998 37.4742 38.9998 29.0981C38.9998 27.0418 38.8953 24.8375 37.7555 21.4116C36.6157 17.9858 36.3861 17.5436 35.1809 15.4279C34.666 19.7454 31.911 21.5448 31.2111 22.0826C31.2111 21.5231 29.5445 15.3359 27.0176 11.6339C24.537 8 21.1634 5.61592 19.1853 4C19.1853 7.06977 18.3219 11.6339 17.0854 13.9594C15.8489 16.2849 15.6167 16.3696 14.0722 18.1002C12.5278 19.8308 11.8189 20.3653 10.5274 22.4651C9.23596 24.565 9 27.3618 9 29.4181C9 37.7942 15.7653 44 24 44Z",fill:a.colors[1],stroke:a.colors[0],"stroke-width":a.strokeWidth,"stroke-linejoin":a.strokeLinejoin},null)])})),I={class:"list"},N=["src"],U={key:0,class:"loading",style:{height:"60px"}},O={key:1,class:"header"},W={class:"logo"},B=["src"],D={class:"name"},F={class:"data"},J={key:0,class:"loading",style:{"flex-direction":"column"}},Z={key:1,class:"all"},E={class:"text"},G={class:"message"},K={key:0,class:"hot"},P=C({__name:"List",setup(k){const C=s(),P=_(),Q=a(null),S=a(C.currentRoute.value.query.type||P.newsArr[0].name),V=a(C.currentRoute.value.query.page?Number(C.currentRoute.value.query.page):1),X=a(null);let Y=null;const ee=()=>{X.value&&(Q.value=b(X.value.updateTime))},ae=async(e,{isNew:a=!1,forceRefresh:s=!1}={})=>{X.value=null;const l=P.newsArr.find((a=>a.name==e));if(l)try{const e=await T({name:l.name,params:l.params,isNew:a,forceRefresh:s});200===e.code?(X.value=e,ee()):$message.error(e.message)}catch(t){$message.error("榜单加载失败，请稍后再试")}};return l((()=>V.value),(e=>{C.push({path:"/list",query:{type:S.value,page:e}}),"undefined"!=typeof window&&window.scrollTo({top:0,behavior:"smooth"})})),l((()=>C.currentRoute.value),(e=>{"list"===e.name&&(S.value=e.query.type||P.newsArr[0]?.name||S.value,V.value=e.query.page?Number(e.query.page):1,ae(S.value))})),t((()=>{ae(S.value),ee(),Y=setInterval(ee,6e4)})),n((()=>{Y&&clearInterval(Y)})),(a,s)=>{const l=M,t=x,n=j,k=A,_=R,b=q,T=H,Y=z,ee=L;return d(),r("div",I,[u(P).newsArr[0]?(d(),o(t,{key:0,class:"type"},{default:c((()=>[(d(!0),r(p,null,m(u(P).newsArr.filter((e=>e.show)),(e=>(d(),o(l,{round:"",size:"large",class:"tag",key:e,type:e.name===u(S)?"primary":"default",onClick:a=>{return s=e.name,void C.push({path:"/list",query:{type:s,page:1}});var s}},{avatar:c((()=>[g("img",{src:`/logo/${e.name}.png`,alt:"logo",class:"logo"},null,8,N)])),default:c((()=>[h(f(e.label)+" ",1)])),_:2},1032,["type","onClick"])))),128))])),_:1})):i("",!0),e(ee,{class:"card"},{header:c((()=>[e(v,{name:"fade",mode:"out-in"},{default:c((()=>[u(X)?(d(),r("div",O,[g("div",W,[g("img",{src:`/logo/${u(S)}.png`,alt:"logo"},null,8,B)]),g("div",D,[e(k,{class:"title"},{default:c((()=>[h(f(u(X).title),1)])),_:1}),e(k,{class:"subtitle",depth:3},{default:c((()=>[h(f(u(X).subtitle),1)])),_:1})]),g("div",F,[u(X).total?(d(),o(k,{key:0,depth:3,class:"total",innerHTML:u(X).total},null,8,["innerHTML"])):i("",!0),e(k,{depth:3,class:"time",innerHTML:u(Q)},null,8,["innerHTML"])])])):(d(),r("div",U,[e(n,{text:"",round:"",height:"40px"})]))])),_:1})])),default:c((()=>[e(v,{name:"fade",mode:"out-in"},{default:c((()=>[u(X)?(d(),r("div",Z,[e(T,{hoverable:"",clickable:"",style:{width:"100%"}},{default:c((()=>[(d(!0),r(p,null,m(u(X).data.slice(20*u(V)-20,20*u(V)),((a,s)=>(d(),o(b,{key:a,onClick:e=>(e=>{if(!e.url||!e.mobileUrl)return $message.error("链接不存在");const a="undefined"!=typeof window&&window.innerWidth<=680?e.mobileUrl:e.url;"open"===P.linkOpenType?window.open(a,"_blank"):"href"===P.linkOpenType&&(window.location.href=a)})(a)},{prefix:c((()=>[e(k,{class:y(["num",s+1+20*(u(V)-1)===1?"one":s+1+20*(u(V)-1)===2?"two":s+1+20*(u(V)-1)===3?"three":null]),depth:2},{default:c((()=>[h(f(s+1+20*(u(V)-1)),1)])),_:2},1032,["class"])])),default:c((()=>[g("div",E,[e(k,{class:"title",innerHTML:a.title},null,8,["innerHTML"]),a.desc?(d(),o(k,{key:0,class:"desc",depth:3,innerHTML:a.desc},null,8,["innerHTML"])):i("",!0)]),g("div",G,[a.hot?(d(),r("div",K,[e(_,{depth:3,component:u($)},null,8,["component"]),e(k,{class:"hot-text",depth:3,innerHTML:a.hot},null,8,["innerHTML"])])):i("",!0)])])),_:2},1032,["onClick"])))),128))])),_:1}),e(Y,{class:"pagination","page-slot":5,"item-count":u(X).data.length,"page-sizes":[20],page:u(V),"onUpdate:page":s[0]||(s[0]=e=>w(V)?V.value=e:null)},null,8,["item-count","page"])])):(d(),r("div",J,[e(n,{text:"",round:"",repeat:20,height:"40px",style:{"margin-bottom":"20px"}})]))])),_:1})])),_:1})])}}},[["__scopeId","data-v-e7414c24"]]);export{P as default};
